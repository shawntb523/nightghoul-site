!function(){try{const t=await fetch("/config.json"),e=await t.json(),i=e.affiliates||{},n=e.defaults||{},a=document.body.getAttribute("data-page")||"unknown";let d=0;document.querySelectorAll("a[data-affil]").forEach((t=>{const e=t.dataset.affil,r=t.dataset.url||"",o=t.dataset.subid||n.subid.replace("{PAGE}",a).replace("{BUTTON}","btn"+d++),f=i[e];let s=r;if(f){if("append"===f.mode){const t=f.append.replace("{SUBID}",o);s=r+(r.includes("?")?"&":"?")+t}else"template"===f.mode?s=f.template.replace("{DEST}",encodeURIComponent(r)).replace("{SUBID}",o):"static"===f.mode&&(s=f.link.replace("{SUBID}",o)),n.utm&&/utm_source=/i.test(s)||(s+=s.includes("?")?"&":"?"+n.utm)}t.href=s,t.target="_blank",t.rel="sponsored noopener noreferrer"}))}catch(t){console.error("Affiliate script error:",t)}}();
